# =============================================================================
# Docker Compose Override - Development Configuration
# =============================================================================
# This file is automatically merged with docker-compose.yml when running
# `docker-compose up` without specifying -f flag.
#
# Provides development-friendly settings:
# - Volume mounts for hot-reload
# - Debug ports exposed
# - Development logging
# =============================================================================

services:
  app:
    # Use development command
    command: ["sh", "-c", "npm run build && npm run start"]
    
    # Enable more verbose logging
    environment:
      - NODE_ENV=development
      - LOG_LEVEL=debug
    
    # Mount source code for development
    volumes:
      - ./src:/app/src:ro
      - ./package.json:/app/package.json:ro
      - ./tsconfig.json:/app/tsconfig.json:ro
    
    # Restart on crash for development
    restart: on-failure

  db:
    # Expose postgres logs for debugging
    command: postgres -c log_statement=all -c log_duration=on
